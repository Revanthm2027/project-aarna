<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>Project AARNA · Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css/styles.css" />
</head>
<body>
  <header class="navbar">
    <div class="nav-inner">
      <a href="/" class="brand">
        <span class="logo-slot"></span>
        <span class="brand-text">
          Project <strong>AARNA</strong>
          <span class="brand-sub">Admin Console</span>
        </span>
      </a>

      <div class="nav-actions">
        <a class="btn btn-secondary" href="/">Back to site</a>
        <button class="theme-toggle" id="theme-toggle" type="button" aria-label="Toggle theme">
          <span class="theme-icon">☾</span>
        </button>
      </div>
    </div>
  </header>

  <main>
    <section class="section">
      <div class="section-header center">
        <h2>Admin</h2>
        <p>Sign in to view messages and newsletter list.</p>
      </div>

      <div id="auth-card" class="contact-form-card hover-float" style="max-width: 560px; margin: 0 auto;">
        <h3>Sign in</h3>
        <form id="admin-login-form" class="contact-form" method="post" action="javascript:void(0)">
          <label>
            Email
            <input type="email" name="email" required />
          </label>
          <label>
            Password
            <input type="password" name="password" required />
          </label>
          <button type="submit" class="btn btn-primary">Login</button>
        </form>
        <p id="login-status" class="form-info"></p>
      </div>

      <div id="dashboard" style="display:none; max-width: 1200px; margin: 2rem auto 0;">
        <div class="methodology-grid">
          <div class="method-card hover-float"><h3>Inbox</h3><p id="stat-new">—</p></div>
          <div class="method-card hover-float"><h3>Contacted</h3><p id="stat-contacted">—</p></div>
          <div class="method-card hover-float"><h3>Closed</h3><p id="stat-closed">—</p></div>
          <div class="method-card hover-float"><h3>Newsletter</h3><p id="stat-subs">—</p></div>
        </div>

        <div class="admin-actions">
          <button id="refresh-btn" class="btn btn-secondary" type="button">Refresh</button>
          <button id="logout-btn" class="btn btn-secondary" type="button">Logout</button>
        </div>

        <div class="section-header" style="margin: 2.2rem 0 1rem;">
          <h2 style="font-size:1.6rem;">Inbox (New)</h2>
          <p>Mark contacted/closed to move it out of Inbox.</p>
        </div>
        <div class="contact-form-card hover-float">
          <div style="overflow:auto;">
            <table class="admin-table">
              <thead><tr><th>Time</th><th>Name</th><th>Email</th><th>Message</th><th>Status</th></tr></thead>
              <tbody id="contacts-new-tbody"></tbody>
            </table>
          </div>
        </div>

        <div class="section-header" style="margin: 2.2rem 0 1rem;">
          <h2 style="font-size:1.6rem;">Contacted</h2>
          <p>Messages under follow-up.</p>
        </div>
        <div class="contact-form-card hover-float">
          <div style="overflow:auto;">
            <table class="admin-table">
              <thead><tr><th>Time</th><th>Name</th><th>Email</th><th>Message</th><th>Status</th></tr></thead>
              <tbody id="contacts-contacted-tbody"></tbody>
            </table>
          </div>
        </div>

        <div class="section-header" style="margin: 2.2rem 0 1rem;">
          <h2 style="font-size:1.6rem;">Closed</h2>
          <p>Archived messages.</p>
        </div>
        <div class="contact-form-card hover-float">
          <div style="overflow:auto;">
            <table class="admin-table">
              <thead><tr><th>Time</th><th>Name</th><th>Email</th><th>Message</th><th>Status</th></tr></thead>
              <tbody id="contacts-closed-tbody"></tbody>
            </table>
          </div>
        </div>

        <div class="section-header" style="margin: 2.2rem 0 1rem;">
          <h2 style="font-size:1.6rem;">Newsletter list</h2>
          <p>Emails that opted in.</p>
        </div>
        <div class="contact-form-card hover-float">
          <div style="overflow:auto;">
            <table class="admin-table">
              <thead><tr><th>Time</th><th>Email</th></tr></thead>
              <tbody id="subs-tbody"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </main>

  <!-- IMPORTANT -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script src="/js/supabaseClient.js"></script>
  <script src="/admin/admin.js"></script>
</body>
</html>
