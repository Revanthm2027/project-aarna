<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <title>Project AARNA · Admin</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="../css/styles.css" />
  <link rel="stylesheet" href="../css/admin.css" />
</head>

<body>
  <div class="global-bg-waves"></div>
  <div class="water-ripples"></div>

  <header class="navbar">
    <div class="nav-inner">
      <a href="/" class="brand">
        <span class="logo-slot"></span>
        <span class="brand-text">
          Project <strong>AARNA</strong>
          <span class="brand-sub">Admin Console</span>
        </span>
      </a>

      <div class="nav-actions">
        <a href="/" class="btn btn-secondary" style="text-decoration:none;">Back to site</a>

        <button class="theme-toggle" id="theme-toggle" type="button" aria-label="Toggle light and dark mode">
          <span class="theme-icon">☾</span>
        </button>
      </div>
    </div>
  </header>

  <main class="admin-main">
    <!-- AUTH -->
    <section id="admin-auth" class="admin-card">
      <h1 class="admin-title">Admin</h1>
      <p class="admin-subtitle">Sign in to manage experiments, messages, and newsletter.</p>

      <form id="admin-login-form" class="admin-form" autocomplete="on">
        <label>
          Email
          <input id="admin-email" type="email" placeholder="projectaarna@protonmail.com" required />
        </label>

        <label>
          Password
          <input id="admin-password" type="password" placeholder="••••••••" required />
        </label>

        <button class="btn btn-primary" type="submit">Login</button>
        <p id="admin-auth-msg" class="admin-msg"></p>
      </form>
    </section>

    <!-- APP -->
    <section id="admin-app" class="admin-card" style="display:none;">
      <div class="admin-topbar">
        <div class="admin-topbar-left">
          <h1 class="admin-title" style="margin:0;">Admin Dashboard</h1>
          <p class="admin-subtitle" style="margin:0;">Manage content without touching code.</p>
        </div>
        <div class="admin-topbar-right">
          <button id="admin-logout" class="btn btn-secondary" type="button">Logout</button>
        </div>
      </div>

      <nav class="admin-tabs" aria-label="Admin navigation">
        <button class="admin-tab active" data-tab="stats">Stats</button>
        <button class="admin-tab" data-tab="experiments">Experiments</button>
        <button class="admin-tab" data-tab="messages">Messages</button>
        <button class="admin-tab" data-tab="newsletter">Newsletter</button>
      </nav>

      <!-- STATS -->
      <section id="tab-stats" class="admin-panel">
        <h2 class="admin-h2">Stats</h2>

        <div class="admin-stat-single">
          <div class="admin-stat-label">Unique visitors (all-time)</div>
          <div id="unique-visitors" class="admin-stat-value">—</div>
          <div class="admin-stat-foot">Counted once per IP (hashed, privacy-safe).</div>
        </div>
      </section>

      <!-- EXPERIMENTS -->
      <section id="tab-experiments" class="admin-panel" style="display:none;">
        <div class="admin-row">
          <h2 class="admin-h2">Experiments</h2>
          <button id="exp-new" class="btn btn-primary" type="button">+ New</button>
        </div>

        <div id="exp-list" class="admin-list"></div>

        <!-- modal -->
        <div id="exp-modal" class="admin-modal" style="display:none;">
          <div class="admin-modal-card">
            <div class="admin-row">
              <h3 id="exp-modal-title" class="admin-h3">New experiment</h3>
              <button id="exp-close" class="admin-x" type="button" aria-label="Close">✕</button>
            </div>

            <form id="exp-form" class="admin-form">
              <input id="exp-id" type="hidden" />

              <label>
                Title
                <input id="exp-title" type="text" required />
              </label>

              <label>
                Status label (e.g., Upcoming / Planned / Design stage)
                <input id="exp-status" type="text" />
              </label>

              <label>
                Description
                <textarea id="exp-description" rows="4" required></textarea>
              </label>

              <label>
                Sort order (lower shows first)
                <input id="exp-sort" type="number" value="0" />
              </label>

              <label class="admin-check">
                <input id="exp-published" type="checkbox" checked />
                Published (show on live site)
              </label>

              <div class="admin-row">
                <button id="exp-save" class="btn btn-primary" type="submit">Save</button>
                <button id="exp-delete" class="btn btn-secondary" type="button" style="display:none;">Delete</button>
              </div>

              <p id="exp-msg" class="admin-msg"></p>
            </form>
          </div>
        </div>
      </section>

      <!-- MESSAGES -->
      <section id="tab-messages" class="admin-panel" style="display:none;">
        <div class="admin-row">
          <h2 class="admin-h2">Messages</h2>
          <div class="admin-seg">
            <button class="admin-seg-btn active" data-filter="open" type="button">Open</button>
            <button class="admin-seg-btn" data-filter="closed" type="button">Closed</button>
          </div>
        </div>

        <div id="msg-list" class="admin-list"></div>
      </section>

      <!-- NEWSLETTER -->
      <section id="tab-newsletter" class="admin-panel" style="display:none;">
        <h2 class="admin-h2">Newsletter subscribers</h2>
        <div id="news-list" class="admin-list"></div>
      </section>
    </section>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
  <script src="../js/supabaseClient.js"></script>
  <script src="../js/admin.js"></script>
</body>
</html>
